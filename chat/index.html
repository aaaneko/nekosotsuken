<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desktop2chat</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/nekosotsuken/chat/css/style.css">
</head>

<body>
<div class="header">
    <a href="/nekosotsuken/home/index.html">
        <i class="bi bi-arrow-return-left back-button"></i>
    </a>
    <i class="bi bi-person-square chat-members-button"></i>
</div>

<div class="chat-container">
    <div class="chat-messages">
        <!-- Existing chat messages content -->
    </div>

    <div class="chat-input">
        <i class="bi bi-plus-square option-button" id="openOptions"></i>
        <input type="text" placeholder="メッセージを入力" id="messageInput" onkeydown="handleKeyDown(event)">
        <button class="btn btn-primary send-button" onclick="sendMessage()">
            <i class="bi bi-telegram"></i> 送信
        </button>
    </div>
</div>

<div class="modal fade" id="optionsModal" tabindex="-1" role="dialog" aria-labelledby="optionsModalLabel" aria-hidden="true">
    <!-- Options modal content -->
</div>

<script>
    function sendMessage() {
        // Get the input element
        var inputElement = document.getElementById('messageInput');

        // Get the value of the input
        var messageText = inputElement.value.trim(); // trim() to remove leading and trailing whitespaces

        // Check if the message is not empty
        if (messageText !== '') {
            // Create a new div element for the message
            var messageDiv = document.createElement('div');
            messageDiv.classList.add('chat-message');

            // Create a span element for the sender (for simplicity, using a fixed sender name)
            var senderSpan = document.createElement('span');
            senderSpan.classList.add('message-sender');
            senderSpan.textContent = 'You: ';

            // Create a text node with the message text
            var messageTextNode = document.createTextNode(messageText);

            // Append the sender span and message text node to the message div
            messageDiv.appendChild(senderSpan);
            messageDiv.appendChild(messageTextNode);

            // Get the chat messages container and append the new message div
            var chatMessagesContainer = document.querySelector('.chat-messages');
            chatMessagesContainer.appendChild(messageDiv);

            // Clear the input field after sending the message
            inputElement.value = '';
        }
    }

    function handleKeyDown(event) {
        // Check if the Enter key is pressed (key code 13)
        if (event.keyCode === 13) {
            // Prevent the default behavior of the Enter key (form submission)
            event.preventDefault();
            // Call the sendMessage function
            sendMessage();
        }
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY9iVfux/L6CZ5gqVMpCEjzg5N92tF4FVqcjz" crossorigin="anonymous"></script>
</body>
</html>
